## 3.0.0 (Unreleased)

NOTES:

* **Major Version**: Version 3.0 of the Azure Provider is a major version - some behaviours have changed and some deprecated fields/resources have been removed - please refer to [the 3.0 upgrade guide for more information](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/guides/3.0-upgrade-guide).
* When upgrading to v3.0 of the AzureRM Provider, we recommend upgrading to the latest version of Terraform Core ([which can be found here](https://www.terraform.io/downloads)) - the next major release of the AzureRM Provider (v4.0) will require Terraform 1.0 or later.

FEATURES:

* **New Data Source**: `azurerm_healthcare_workspace` [GH-15759]
* **New Data Source**: `azurerm_key_vault_encrypted_value` [GH-15873]
* **New Data Source**: `azurerm_managed_api` [GH-15797]
* **New Resource**: `azurerm_api_connection` [GH-15797]
* **New Resource**: `azurerm_healthcare_workspace` [GH-15759]
* **New Resource**: `azurerm_stream_analytics_function_javascript_uda` [GH-15831]

ENHANCEMENTS:

* dependencies: updating to `v62.3.0` of `github.com/Azure/azure-sdk-for-go` [GH-15927]
* dependencies: updating to `v0.26.0` of `github.com/hashicorp/go-azure-helpers` [GH-15889]
* dependencies: updating `appplatform` to API Version `2022-01-01-preview` [GH-15597]
* provider: MSAL (and Microsoft Graph) is now used for authentication instead of ADAL (and Azure Active Directory Graph) [GH-12443]
* provider: all (non-deprecated) resources now validate the Resource ID during import [GH-15989]
* provider: added a new feature flag within the `api_management` block for `recover_soft_deleted`, for configuring whether a soft-deleted `azurerm_api_management` should be recovered during creation [GH-15871]
* provider: added a new feature flag within the `key_vault` block for `recover_soft_deleted_certificates`, for configuring whether a soft-deleted `azurerm_key_vault_certificate` should be recovered during creation [GH-10273]
* provider: added a new feature flag within the `key_vault` block for `purge_soft_deleted_certificates_on_destroy`, for configuring whether a deleted `azurerm_key_vault_certificate` should be purged during deletion [GH-10273]
* provider: added a new feature flag within the `key_vault` block for `recover_soft_deleted_keys`, for configuring whether a soft-deleted `azurerm_key_vault_key` should be recovered during creation [GH-10273]
* provider: added a new feature flag within the `key_vault` block for `purge_soft_deleted_keys_on_destroy`, for configuring whether a deleted `azurerm_key_vault_key` should be purged during deletion [GH-10273]
* provider: added a new feature flag within the `key_vault` block for `recover_soft_deleted_secrets`, for configuring whether a soft-deleted `azurerm_key_vault_secret` should be recovered during creation [GH-10273]
* provider: added a new feature flag within the `key_vault` block for `purge_soft_deleted_secrets_on_destroy`, for configuring whether a deleted `azurerm_key_vault_secret` should be purged during deletion [GH-10273]
* provider: added a new feature flag within the `resource_group` block for `prevent_deletion_if_contains_resources`, for configuring whether Terraform should prevent the deletion of a Resource Group which still contains items [GH-13777]
* provider: the feature flag `permanently_delete_on_destroy` within the `log_analytics_workspace` block now defaults to `true` [GH-15948]
* Resources supporting Availability Zones: Zones are now treated consistently across the Provider and the field within Terraform has been renamed to either `zone` (for a single Zone) or `zones` (where multiple can be defined) - the complete list of resources can be found in the 3.0 Upgrade Guide [GH-14588]
* Resources supporting Managed Identity: Identity blocks are now treated consistently across the Provider - the complete list of resources can be found in the 3.0 Upgrade Guide [GH-15187]
* provider: removing the `network` and `relaxed_locking` feature flags, since this is now enabled by default [GH-15719]
* Data Source: `azurerm_linux_function_app` - support for the `storage_key_vault_secret_id` property [GH-15793]
* Data Source: `azurerm_storage_account_sas` - now exports the `tag` and `filter` attributes [GH-15863]
* Data Source: `azurerm_windows_function_app` - support for `storage_key_vault_secret_id` property [GH-15793]
* `azurerm_application_insights` - can now disable Rule and Action Groups that are automatically created [GH-15892]
* `azurerm_eventgrid_system_topic_event_subscription` - support for the `delivery_property` property [GH-15559]
* `azurerm_iothub` - add support for the `authentication_type` and `identity_id` properties in the `file_upload` block [GH-15874]
* `azurerm_kubernetes_cluster` - the `kube_admin_config` block is now marked as sensitive in addition to all items within it [GH-4105]
* `azurerm_kubernetes_cluster` - add support for the `key_vault_secrets_provider` and `open_service_mesh_enabled` property in Azure China and Azure Government [GH-15878]
* `azurerm_linux_function_app` - add support for the `storage_key_vault_secret_id` property [GH-15793]
* `azurerm_linux_function_app` - updating the read timeout to be `5m` [GH-15867]
* `azurerm_linux_function_app` - support for node version `16` preview [GH-15884]
* `azurerm_linux_function_app` - add support for `use_dotnet_isolated_runtime` [GH-15969]
* `azurerm_linux_function_app_slot` - add support for `use_dotnet_isolated_runtime` [GH-15969]
* `azurerm_linux_function_app_slot` - add support for `storage_key_vault_secret_id` [GH-15793]
* `azurerm_linux_function_app_slot` - updating the read timeout to be 5m [GH-15867]
* `azurerm_linux_virtual_machine` - support for the `termination_notification` property [GH-14933]
* `azurerm_linux_virtual_machine ` - support for the `edge_zone` property [GH-15890]
* `azurerm_linux_virtual_machine_scale_set` - support for the `edge_zone` property [GH-15890]
* `azurerm_linux_web_app` - support for PHP version 8.0 [GH-15933]
* `azurerm_loadbalancer` - support for the `edge_zone` property [GH-15890]
* `azurerm_managed_disk` - support for the `edge_zone` property [GH-15890]
* `azurerm_management_group_policy_assignment` - support for User Assigned Identities [GH-15376]
* `azurerm_mssql_server` - the `minimum_tls_version` property now defaults to `1.2` [GH-10276]
* `azurerm_mysql_server` - the `ssl_minimal_tls_version_enforced` property now defaults to `1.2` [GH-10276]
* `azurerm_network_interface` - support for the `edge_zone` property [GH-15890]
* `azurerm_network_security_rule` - no longer locks on the network security group name [GH-15719]
* `azurerm_postgresql_server` - the `ssl_minimal_tls_version_enforced` property now defaults to `1.2` [GH-10276]
* `azurerm_public_ip` - support for the `edge_zone` property [GH-15890]
* `azurerm_redis_cache` - the `minimum_tls_version` property  now defaults to `1.2` [GH-10276]
* `azurerm_resource_group` - Terraform now checks during the deletion of a Resource Group if there's any items remaining and will raise an error if so by default (to avoid deleting items unintentionally). This behaviour can be controlled using the `prevent_deletion_if_contains_resources` feature-flag within the `resource_group` block within the `features` block. [GH-13777]
* `azurerm_resource_group_policy_assignment` - support for User Assigned Identities [GH-15376]
* `azurerm_resource_policy_assignment` - support for User Assigned Identities [GH-15376]
* `azurerm_sentinel_alert_rule_scheduled` - support for `alert_details_override` [GH-15901]
* `azurerm_sentinel_alert_rule_scheduled` - support for `entity_mapping` [GH-15901] 
* `azurerm_sentinel_alert_rule_scheduled` - support for `custom_details` [GH-15901]
* `azurerm_sentinel_alert_rule_scheduled` - support for `group_by_alert_details` [GH-15901]
* `azurerm_sentinel_alert_rule_scheduled` - support for `group_by_custom_details` [GH-15901]
* `azurerm_site_recovery_replicated_vm` - support for the `target_availability_zone` property [GH-15617]
* `azurerm_shared_image` - support for the `support_accelerated_network` property [GH-15562]
* `azurerm_static_site` - the `identity` property now supports `SystemAssigned` and `UserAssigned` [GH-15834]
* `azurerm_storage_account` - support for the `edge_zone` property [GH-15890]
* `azurerm_storage_account` - the `min_tls_version` property now defaults to `1.2` [GH-10276]
* `azurerm_storage_share` - `quota` is now required [GH-15982]
* `azurerm_subscription_policy_assignment` - support for User Assigned Identities [GH-15376]
* `azurerm_virtual_network` - support for the `edge_zone` property [GH-15890]
* `azurerm_virtual_network_gateway` - support for the `edge_zone` property [GH-15890]
* `azurerm_virtual_hub` - support for the `virtual_router_asn` and `virtual_router_ips` properties [GH-15741]
* `azurerm_windows_function_app` - add support for `storage_key_vault_secret_id` property [GH-15793]
* `azurerm_windows_function_app` - updating the read timeout to be `5m` [GH-15867]
* `azurerm_windows_function_app` node version validation string can not be prefixed with `~` [GH-15884]
* `azurerm_windows_function_app` support for node version `16` preview support [GH-15884]
* `azurerm_windows_function_app` - add support for `use_dotnet_isolated_runtime` [GH-15969]
* `azurerm_windows_function_app_slot` - add support for `use_dotnet_isolated_runtime` [GH-15969]
* `azurerm_windows_function_app_slot` - add support for the `storage_key_vault_secret_id` property [GH-15793]
* `azurerm_windows_function_app_slot` - updating the read timeout to be 5m [GH-15867]
* `azurerm_windows_virtual_machine` - support for the `termination_notification` property [GH-14933]
* `azurerm_windows_virtual_machine` - support for the `edge_zone` property [GH-15890]
* `azurerm_windows_virtual_machine_scale_set` - support for the `edge_zone` property [GH-15890]

BUG FIXES:

* provider: the `recover_soft_deleted_key_vaults` feature flag within the `key_vault` block now defaults to `true` [GH-15984]
* provider: the `purge_soft_delete_on_destroy ` feature flag within the `key_vault` block now defaults to `true` [GH-15984] 
* `azurerm_app_configuration_feature` - detecting that the key is gone when the App Configuration has been deleted [GH-15973]
* `azurerm_app_configuration_key` - detecting that the key is gone when the App Configuration has been deleted [GH-15973]
* `azurerm_application_gateway` - the `backend_address_pool` block is now a Set rather than a List [GH-6896]
* `azurerm_application_gateway` - the field `fqdns` within the `backend_address_pool` block is now a Set rather than a List [GH-6896]
* `azurerm_application_gateway` - the field `ip_addresses` within the `backend_address_pool` block is now a Set rather than a List [GH-6896]
* `azurerm_application_gateway` - the `backend_http_settings` block is now a Set rather than a List [GH-6896]
* `azurerm_application_gateway` - the `frontend_port` block is now a Set rather than a List [GH-6896]
* `azurerm_application_gateway` - the field `host_names` within the `frontend_port` block is now a Set rather than a List [GH-6896]
* `azurerm_application_gateway` - the `http_listener` block is now a Set rather than a List [GH-6896]
* `azurerm_application_gateway` - the `private_endpoint_connection` block is now a Set rather than a List [GH-6896]
* `azurerm_application_gateway` - the `private_link_configuration` block is now a Set rather than a List [GH-6896]
* `azurerm_application_gateway` - the `probe` block is now a Set rather than a List [GH-6896]
* `azurerm_application_gateway` - the `redirect_configuration` block is now a Set rather than a List [GH-6896]
* `azurerm_application_gateway` - the `request_routing_rule` block is now a Set rather than a List [GH-6896]
* `azurerm_application_gateway` - the `ssl_certificate` block is now a Set rather than a List [GH-6896]
* `azurerm_container_registry` - validate the `georepliactions` property does not include the location of the Container Registry [GH-15847]
* `azurerm_cosmosdb_mongo_collection` - the `default_ttl_seconds` property can now be set to `-1` [GH-15736]
* `azurerm_eventhub` - prevent panic when the `capture_description` block is removed [GH-15930]
* `azurerm_key_vault_access_policy` - validating the Resource ID during import [GH-15989]
* `azurerm_linux_function_app` - fixed update handling of `app_settings` for `WEBSITE_CONTENTSHARE` and `WEBSITE_CONTENTAZUREFILECONNECTIONSTRING` [GH-15907]
* `azurerm_linux_function_app_slot` - fixed update handling of `app_settings` for `WEBSITE_CONTENTSHARE` and `WEBSITE_CONTENTAZUREFILECONNECTIONSTRING` [GH-15907]
* `azurerm_local_network_gateway` - fix for `address_space` cannot be updated [GH-15159]
* `azurerm_log_analytics_cluster_customer_managed_key` - detecting when the Customer Managed Key has been removed [GH-15973]
* `azurerm_mssql_database_vulnerability_assessment_rule_baseline` - prevent the resource from being replaced every apply [GH-14759]
* `azurerm_security_center_auto_provisioning ` - validating the Resource ID during import [GH-15989] 
* `azurerm_synapse_workspace` - fixing a bug where workspaces created from a Dedicated SQL Pool / SQL Data Warehouse couldn't be retrieved [GH-15829]
* `azurerm_synapse_workspace_key` - keys can now be correctly rotated [GH-15897]
* `azurerm_windows_function_app` - fixed update handling of `app_settings` for `WEBSITE_CONTENTSHARE` and `WEBSITE_CONTENTAZUREFILECONNECTIONSTRING` [GH-15907]
* `azurerm_windows_function_app_slot` - fixed update handling of `app_settings` for `WEBSITE_CONTENTSHARE` and `WEBSITE_CONTENTAZUREFILECONNECTIONSTRING` [GH-15907]


---

For information on changes between the v2.99.0 and v2.0.0 releases, please see [the previous v2.x changelog entries](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/CHANGELOG-v2.md).

For information on changes between the v1.44.0 and v1.0.0 releases, please see [the previous v1.x changelog entries](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/CHANGELOG-v1.md).

For information on changes prior to the v1.0.0 release, please see [the v0.x changelog](https://github.com/hashicorp/terraform-provider-azurerm/blob/main/CHANGELOG-v0.md).
